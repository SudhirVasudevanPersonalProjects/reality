# Manual Test Scenarios - Story 1.4: Web Capture Interface

**Story**: 1.4 - Web Capture Interface ("Add to Your Reality")
**Test Architect**: Quinn
**Date**: 2025-11-01
**Status**: Ready for Manual Testing

---

## Prerequisites

### Environment Setup
- [ ] **Docker Desktop Running** (CRITICAL - app won't work without this)
- [ ] Supabase local instance started: `supabase start`
- [ ] All migrations applied: `supabase db push`
- [ ] Development server running: `pnpm dev`
- [ ] Verify storage bucket exists: Check Supabase Studio ‚Üí Storage ‚Üí captures-media

### Test Data Preparation
- [ ] Create test account via signup flow
- [ ] Prepare test files:
  - Small image (< 1MB): `test-image-small.jpg`
  - Large image (~8MB): `test-image-large.jpg`
  - Oversized image (> 10MB): `test-image-oversized.jpg`
  - Small video (< 5MB): `test-video-small.mp4`
  - Large video (~40MB): `test-video-large.mp4`
  - Oversized video (> 50MB): `test-video-oversized.mp4`
  - Invalid file type: `test-document.pdf`

---

## Test Scenarios

### **TS-1: Authentication & Navigation**

#### TS-1.1: Unauthenticated Access Protection (AC: 10)
**Priority**: P0 (Critical - Security)

**Steps**:
1. Log out if logged in
2. Navigate to `http://localhost:3000/capture`

**Expected**:
- [ ] Immediately redirected to `/login`
- [ ] No capture interface visible
- [ ] URL changes to `/login`

**Actual Result**: _______________________

---

#### TS-1.2: Dashboard to Capture Navigation (AC: 7)
**Priority**: P0 (Critical - User Flow)

**Steps**:
1. Log in to application
2. Navigate to dashboard
3. Click navbar button "+ Add to Your Reality"
4. Verify capture page loads

**Expected**:
- [ ] Capture page loads at `/capture`
- [ ] Page title shows "Add to Your Reality"
- [ ] Interface has space theme styling (dark background, white text)
- [ ] Textarea placeholder visible
- [ ] File attachment button (üìé) visible
- [ ] Submit button (‚¨ÜÔ∏è) visible but disabled

**Actual Result**: _______________________

---

#### TS-1.3: Floating Plus Button Navigation
**Priority**: P1 (Should Test)

**Steps**:
1. From dashboard, scroll to bottom right
2. Click floating "+" button

**Expected**:
- [ ] Navigates to `/capture`
- [ ] Button visible and accessible

**Actual Result**: _______________________

---

### **TS-2: Text Capture Creation**

#### TS-2.1: Simple Text Capture (AC: 1, 5)
**Priority**: P0 (Critical - Core Feature)

**Steps**:
1. Navigate to `/capture`
2. Type in textarea: "My first reality capture"
3. Verify submit button becomes enabled
4. Click submit button (‚¨ÜÔ∏è)
5. Wait for success message
6. Verify redirect to dashboard
7. Check dashboard for new capture

**Expected**:
- [ ] Submit button enables when text entered
- [ ] Loading indicator (‚è≥) shows during submission
- [ ] Success message appears: "‚úì Capture created successfully!"
- [ ] Auto-redirect to `/dashboard` after 1.5 seconds
- [ ] New capture appears at top of dashboard timeline
- [ ] Capture shows: "My first reality capture"
- [ ] Timestamp shows "Just now" or similar

**Actual Result**: _______________________

---

#### TS-2.2: Text Capture with URL (AC: 6)
**Priority**: P0 (Critical - Requirement)

**Steps**:
1. Navigate to `/capture`
2. Paste URL: `https://www.tiktok.com/@user/video/123456`
3. Submit capture
4. Check dashboard

**Expected** (per PRD FR4):
- [ ] URL preserved exactly in capture
- [ ] **NOTE**: Current implementation stores as content_type: 'text', not 'url'
- [ ] URL should be clickable link (verify in dashboard)

**Actual Result**: _______________________

**‚ö†Ô∏è Known Issue**: URL detection not implemented. All text ‚Üí content_type: 'text', not 'url'

---

#### TS-2.3: Multi-line Text Capture
**Priority**: P1 (Should Test)

**Steps**:
1. Navigate to `/capture`
2. Enter multi-line text:
   ```
   First line of my reality
   Second line with thoughts
   Third line with more ideas
   ```
3. Submit and verify

**Expected**:
- [ ] All lines preserved with line breaks
- [ ] Dashboard displays text with proper line breaks
- [ ] No text truncation

**Actual Result**: _______________________

---

#### TS-2.4: Empty Text Submission (Error Case)
**Priority**: P1 (Should Test)

**Steps**:
1. Navigate to `/capture`
2. Leave textarea empty
3. Verify submit button is disabled
4. Try to submit (should not be possible)

**Expected**:
- [ ] Submit button remains disabled
- [ ] No submission occurs
- [ ] No error message shown (prevented by disabled state)

**Actual Result**: _______________________

---

### **TS-3: Photo Upload**

#### TS-3.1: Single Photo Upload (AC: 2, 5)
**Priority**: P0 (Critical - Core Feature)

**Steps**:
1. Navigate to `/capture`
2. Click attachment button (üìé)
3. Select `test-image-small.jpg` (< 1MB)
4. Verify preview appears
5. Click submit
6. Check dashboard

**Expected**:
- [ ] File picker opens showing only images/videos
- [ ] Preview shows in preview area with thumbnail
- [ ] File name displayed below thumbnail
- [ ] Remove button (√ó) appears on hover
- [ ] Submit button enabled
- [ ] Upload completes successfully
- [ ] Dashboard shows photo capture
- [ ] Image loads and displays correctly
- [ ] Timestamp visible

**Actual Result**: _______________________

---

#### TS-3.2: Large Photo Upload (~8MB)
**Priority**: P1 (Should Test - Performance)

**Steps**:
1. Navigate to `/capture`
2. Select `test-image-large.jpg` (~8MB, under 10MB limit)
3. Submit

**Expected**:
- [ ] Upload accepts file (under 10MB limit)
- [ ] Preview generates successfully
- [ ] Upload completes within 3 seconds (NFR2 requirement)
- [ ] Dashboard displays image

**Actual Result**: _______________________

---

#### TS-3.3: Oversized Photo Rejection (AC: 2)
**Priority**: P0 (Critical - Validation)

**Steps**:
1. Navigate to `/capture`
2. Select `test-image-oversized.jpg` (> 10MB)
3. Observe behavior

**Expected**:
- [ ] File rejected with error message
- [ ] Error message: "File [filename] exceeds size limit"
- [ ] File NOT added to preview area
- [ ] User can select different file

**Actual Result**: _______________________

---

#### TS-3.4: Photo Removal from Preview
**Priority**: P1 (Should Test - UX)

**Steps**:
1. Navigate to `/capture`
2. Select `test-image-small.jpg`
3. Hover over preview thumbnail
4. Click remove button (√ó)

**Expected**:
- [ ] Remove button visible on hover
- [ ] File removed from preview area
- [ ] Submit button becomes disabled (no content)
- [ ] No memory leak (object URL revoked)

**Actual Result**: _______________________

---

### **TS-4: Video Upload**

#### TS-4.1: Single Video Upload (AC: 3, 5)
**Priority**: P0 (Critical - Core Feature)

**Steps**:
1. Navigate to `/capture`
2. Select `test-video-small.mp4` (< 5MB)
3. Verify preview
4. Submit
5. Check dashboard

**Expected**:
- [ ] Video preview shows in preview area
- [ ] Video player appears on dashboard
- [ ] Video has controls (play, pause, volume)
- [ ] Video plays when clicked
- [ ] "Your browser does not support the video tag" fallback text present

**Actual Result**: _______________________

---

#### TS-4.2: Large Video Upload (~40MB)
**Priority**: P1 (Should Test - Performance)

**Steps**:
1. Navigate to `/capture`
2. Select `test-video-large.mp4` (~40MB, under 50MB limit)
3. Submit

**Expected**:
- [ ] Upload accepts file
- [ ] Upload completes (may take longer than 3 seconds for large video)
- [ ] Dashboard displays video player
- [ ] Video streams correctly

**Actual Result**: _______________________

---

#### TS-4.3: Oversized Video Rejection (AC: 3)
**Priority**: P0 (Critical - Validation)

**Steps**:
1. Navigate to `/capture`
2. Select `test-video-oversized.mp4` (> 50MB)

**Expected**:
- [ ] File rejected with error message
- [ ] Error message: "File [filename] exceeds size limit"
- [ ] File NOT uploaded or added to preview

**Actual Result**: _______________________

---

### **TS-5: Multi-File Batch Upload**

#### TS-5.1: Multiple Photos at Once (AC: 4, 5)
**Priority**: P0 (Critical - Core Feature)

**Steps**:
1. Navigate to `/capture`
2. Click attachment button
3. Select 3 images using Ctrl+Click (multi-select)
4. Verify preview shows all 3
5. Submit
6. Check dashboard

**Expected**:
- [ ] All 3 images appear in preview grid
- [ ] Counter shows "3 files"
- [ ] All 3 upload successfully
- [ ] Dashboard shows 3 separate capture cards
- [ ] All 3 appear at top of timeline
- [ ] Each has own timestamp (should be same or very close)

**Actual Result**: _______________________

---

#### TS-5.2: Mixed Media Batch (Photos + Videos)
**Priority**: P1 (Should Test)

**Steps**:
1. Navigate to `/capture`
2. Select 2 images + 1 video
3. Submit

**Expected**:
- [ ] All files preview correctly
- [ ] All upload successfully
- [ ] Dashboard shows 3 separate captures
- [ ] Photos display as images
- [ ] Video displays with player

**Actual Result**: _______________________

---

#### TS-5.3: Batch with Some Invalid Files
**Priority**: P1 (Should Test - Error Handling)

**Steps**:
1. Navigate to `/capture`
2. Select 2 valid images + 1 PDF file
3. Observe behavior

**Expected**:
- [ ] Valid images accepted
- [ ] PDF rejected with error message: "Invalid file type: test-document.pdf"
- [ ] Valid images still appear in preview
- [ ] User can proceed with valid files only

**Actual Result**: _______________________

**‚ö†Ô∏è Current Behavior**: API route silently skips invalid files. Client shows error but submission may partially succeed.

---

#### TS-5.4: Batch with Some Oversized Files
**Priority**: P1 (Should Test - Error Handling)

**Steps**:
1. Select 1 valid image + 1 oversized image
2. Submit

**Expected**:
- [ ] Valid image uploads successfully
- [ ] Oversized image rejected
- [ ] At least 1 capture created
- [ ] User sees which file failed

**Actual Result**: _______________________

**‚ö†Ô∏è Current Behavior**: API route silently skips oversized files. Only console.error logs, no user feedback.

---

### **TS-6: Combined Text + Files**

#### TS-6.1: Text + Photo Together (AC: 1, 2, 5)
**Priority**: P0 (Critical - Common Use Case)

**Steps**:
1. Navigate to `/capture`
2. Type text: "Check out this photo from my day"
3. Attach 1 image
4. Submit
5. Check dashboard

**Expected**:
- [ ] 2 separate captures created:
  1. Text capture: "Check out this photo from my day"
  2. Photo capture with image
- [ ] Both appear on dashboard
- [ ] Both have separate timestamps

**Actual Result**: _______________________

---

#### TS-6.2: Text + Multiple Files
**Priority**: P1 (Should Test)

**Steps**:
1. Enter text: "My reality today"
2. Attach 2 images + 1 video
3. Submit

**Expected**:
- [ ] 4 total captures created (1 text + 3 media)
- [ ] All appear on dashboard
- [ ] Correct ordering on timeline

**Actual Result**: _______________________

---

### **TS-7: Dashboard Display & Integration**

#### TS-7.1: Empty Dashboard State (AC: 5)
**Priority**: P1 (Should Test - UX)

**Steps**:
1. Create new test account
2. Login
3. View dashboard (no captures yet)

**Expected**:
- [ ] Message: "No captures yet"
- [ ] Message: "Start capturing your reality!"
- [ ] Prominent button: "+ Create Your First Capture"
- [ ] Button navigates to `/capture`
- [ ] No capture timeline visible

**Actual Result**: _______________________

---

#### TS-7.2: Chronological Order (AC: 5)
**Priority**: P1 (Should Test - Requirement)

**Steps**:
1. Create capture 1: "First"
2. Wait 5 seconds
3. Create capture 2: "Second"
4. Wait 5 seconds
5. Create capture 3: "Third"
6. View dashboard

**Expected**:
- [ ] Captures appear in reverse chronological order:
  - Top: "Third" (most recent)
  - Middle: "Second"
  - Bottom: "First" (oldest)
- [ ] Timestamps show relative time (e.g., "Just now", "1m ago")

**Actual Result**: _______________________

---

#### TS-7.3: Capture Type Display Verification
**Priority**: P1 (Should Test - Visual Regression)

**Steps**:
1. Create one of each type:
   - Text capture
   - Photo capture
   - Video capture
2. View dashboard

**Expected**:
- [ ] **Text capture**: Shows text content in white on dark background, whitespace preserved
- [ ] **Photo capture**: Image displays with rounded corners, max-width, proper aspect ratio
- [ ] **Video capture**: Video player with controls, rounded corners
- [ ] All have timestamps
- [ ] All have consistent card styling (border, padding, hover effect)

**Actual Result**: _______________________

---

### **TS-8: Security & RLS Testing**

#### TS-8.1: User Isolation - Cannot See Other Users' Captures
**Priority**: P0 (Critical - Security)

**Steps**:
1. Login as User A
2. Create capture: "User A's private capture"
3. Logout
4. Signup/Login as User B
5. View dashboard

**Expected**:
- [ ] User B sees only their own captures (or empty state)
- [ ] User A's capture NOT visible
- [ ] No data leakage in network requests (check DevTools Network tab)

**Actual Result**: _______________________

---

#### TS-8.2: Storage Bucket RLS - Cannot Access Other Users' Files
**Priority**: P0 (Critical - Security)

**Steps**:
1. Login as User A
2. Upload photo
3. Copy media_url from dashboard (right-click image ‚Üí Copy Image Address)
4. Logout
5. Login as User B
6. Open User A's media_url directly in browser

**Expected**:
- [ ] Access denied (403 or similar)
- [ ] Image does NOT load for User B

**‚ö†Ô∏è CRITICAL BUG FOUND**: Storage bucket set to `public: true` in migration. This allows unauthorized access!

**Actual Result**: _______________________

---

#### TS-8.3: API Route Authentication
**Priority**: P0 (Critical - Security)

**Steps**:
1. Logout
2. Open browser DevTools ‚Üí Console
3. Run:
   ```javascript
   fetch('/api/captures', {
     method: 'POST',
     body: new FormData()
   }).then(r => r.json()).then(console.log)
   ```

**Expected**:
- [ ] Response: `{ success: false, error: "Unauthorized" }`
- [ ] Status code: 401
- [ ] No capture created

**Actual Result**: _______________________

---

### **TS-9: Error Handling & Edge Cases**

#### TS-9.1: Network Failure During Upload
**Priority**: P1 (Should Test - Reliability)

**Steps**:
1. Navigate to `/capture`
2. Enter text or select file
3. Open DevTools ‚Üí Network tab ‚Üí Throttle to "Offline"
4. Click submit
5. Observe behavior

**Expected**:
- [ ] Error message appears
- [ ] User informed of failure
- [ ] No redirect to dashboard
- [ ] Form retains data (user doesn't lose work)

**Actual Result**: _______________________

---

#### TS-9.2: Special Characters in Text
**Priority**: P1 (Should Test - XSS Prevention)

**Steps**:
1. Enter text with special chars:
   ```
   <script>alert('XSS')</script>
   Test & special "quotes" 'here'
   ```
2. Submit
3. Check dashboard

**Expected**:
- [ ] Text appears exactly as entered (no script execution)
- [ ] Special characters properly escaped
- [ ] No XSS vulnerability
- [ ] Quotes and ampersands display correctly

**Actual Result**: _______________________

---

#### TS-9.3: Very Long Text (Edge Case)
**Priority**: P2 (Nice to Have)

**Steps**:
1. Enter 5000+ characters of text
2. Submit

**Expected**:
- [ ] Text accepted (no character limit specified)
- [ ] Upload succeeds
- [ ] Dashboard displays full text
- [ ] No truncation unless intended

**Actual Result**: _______________________

---

#### TS-9.4: Rapid Successive Submissions
**Priority**: P2 (Nice to Have - Race Condition)

**Steps**:
1. Enter text: "Test 1"
2. Click submit
3. Immediately click submit again (before redirect)

**Expected**:
- [ ] Only 1 capture created (button disabled during submission)
- [ ] No duplicate captures
- [ ] Loading state prevents double-submit

**Actual Result**: _______________________

---

### **TS-10: Accessibility Testing**

#### TS-10.1: Keyboard Navigation
**Priority**: P1 (Should Test - Accessibility)

**Steps**:
1. Navigate to `/capture`
2. Use only keyboard (Tab, Enter, Space):
   - Tab to textarea
   - Type text
   - Tab to attachment button
   - Tab to submit button
   - Press Enter to submit

**Expected**:
- [ ] All interactive elements reachable via Tab
- [ ] Focus indicators visible
- [ ] Enter key submits form
- [ ] No keyboard traps

**Actual Result**: _______________________

---

#### TS-10.2: Screen Reader Support
**Priority**: P2 (Nice to Have)

**Steps**:
1. Enable screen reader (NVDA, JAWS, or macOS VoiceOver)
2. Navigate capture page

**Expected**:
- [ ] Page title announced
- [ ] Form fields have labels
- [ ] Buttons have accessible names
- [ ] Error messages announced
- [ ] Success messages announced

**‚ö†Ô∏è Issues Found**:
- Attachment button only has emoji, no ARIA label
- Submit button only has emoji, no ARIA label
- Images on dashboard missing meaningful alt text

**Actual Result**: _______________________

---

### **TS-11: Performance Testing**

#### TS-11.1: Upload-to-Dashboard Latency (NFR2)
**Priority**: P0 (Critical - NFR Requirement)

**Steps**:
1. Navigate to `/capture`
2. Prepare stopwatch
3. Upload small image (< 1MB)
4. Click submit
5. Measure time until capture appears on dashboard

**Expected**:
- [ ] Total time < 3 seconds (per NFR2 requirement)
- [ ] Upload completes quickly
- [ ] Dashboard update immediate

**Actual Result**: _______________________

---

#### TS-11.2: Large File Upload Time
**Priority**: P1 (Should Test)

**Steps**:
1. Upload 45MB video
2. Measure upload time

**Expected**:
- [ ] Upload completes without timeout
- [ ] Progress indication (if implemented)
- [ ] May exceed 3s for large files (acceptable for large videos)

**Actual Result**: _______________________

---

### **TS-12: Cross-Browser Testing**

#### TS-12.1: Chrome/Edge (Chromium)
**Priority**: P0 (Critical - Primary Browser)

**Steps**:
1. Test all core scenarios in Chrome
2. Verify file picker works
3. Verify image/video display

**Expected**:
- [ ] All features work correctly
- [ ] No console errors
- [ ] Styling renders correctly

**Actual Result**: _______________________

---

#### TS-12.2: Firefox
**Priority**: P1 (Should Test)

**Expected**:
- [ ] File uploads work
- [ ] Video playback works
- [ ] No layout issues

**Actual Result**: _______________________

---

#### TS-12.3: Safari (macOS/iOS)
**Priority**: P1 (Should Test - Mobile Important)

**Expected**:
- [ ] HEIC/HEIF images supported (per migration MIME types)
- [ ] MOV videos supported
- [ ] File picker works on iOS

**Actual Result**: _______________________

---

## Test Execution Summary

**Tester Name**: _______________________
**Date**: _______________________
**Environment**: _______________________

### Results

| Priority | Total | Passed | Failed | Blocked | Skipped |
|----------|-------|--------|--------|---------|---------|
| P0       | 17    |        |        |         |         |
| P1       | 23    |        |        |         |         |
| P2       | 4     |        |        |         |         |
| **Total**| **44**|        |        |         |         |

### Critical Blockers Found

1. ‚ö†Ô∏è **BLOCKER**: Docker not running ‚Üí Supabase not available
2. ‚ö†Ô∏è **SECURITY**: Storage bucket public flag allows unauthorized access
3. ‚ö†Ô∏è **MISSING**: URL detection not implemented (AC #6)
4. ‚ö†Ô∏è **MISSING**: No API route tests (Task 7)

### Notes

_______________________
_______________________
_______________________

---

## Setup Instructions for First-Time Testers

### Start Supabase Local Instance

```bash
# 1. Ensure Docker Desktop is running (check system tray)

# 2. Start Supabase
supabase start

# 3. Apply migrations (including storage bucket)
supabase db push

# 4. Verify storage bucket exists
# Open: http://localhost:54323 (Supabase Studio)
# Navigate to: Storage ‚Üí Should see "captures-media" bucket

# 5. Start development server
pnpm dev

# 6. Open app
# http://localhost:3000
```

### Create Test User

```bash
# Option 1: Via UI
# 1. Navigate to http://localhost:3000/signup
# 2. Enter email: test@example.com
# 3. Enter password: testpassword123
# 4. Sign up

# Option 2: Via Supabase Studio
# 1. Open http://localhost:54323
# 2. Go to Authentication ‚Üí Users
# 3. Click "Add User"
```

---

## Recommended Test Execution Order

1. **Setup** (TS-1): Authentication & navigation
2. **Core Features** (TS-2, TS-3, TS-4): Text, photo, video
3. **Advanced Features** (TS-5, TS-6): Batch uploads, combinations
4. **Integration** (TS-7): Dashboard display
5. **Security** (TS-8): RLS, user isolation
6. **Edge Cases** (TS-9): Error handling
7. **Non-Functional** (TS-10, TS-11, TS-12): Accessibility, performance, browsers

---

**End of Manual Test Scenarios**
