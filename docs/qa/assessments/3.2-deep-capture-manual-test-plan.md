i# Manual Test Plan: Story 3.2 - Deep-Capture Page

**Story**: 3.2 - Deep-Capture Page
**Test Type**: Manual Acceptance Testing
**Created**: 2025-11-09
**Created By**: Quinn (Test Architect)
**Purpose**: Verify all acceptance criteria through manual testing before marking story as Done

---

## Test Environment Setup

### Prerequisites
- [ ] Application running locally (`pnpm dev`)
- [ ] User authenticated (logged in)
- [ ] Test data: Various file types available for upload
  - Sample photo (JPG/PNG)
  - Sample handwritten image with text
  - Sample video (MP4/MOV)
  - Sample audio file (M4A/MP3)
  - Sample link URLs (Instagram, TikTok, YouTube, etc.)
- [ ] Browser DevTools open (for checking console errors)

### Test Data Files Needed
- `test-photo.jpg` - Regular photo
- `handwritten-note.jpg` - Image with handwritten text
- `test-video.mp4` - Short video file
- `test-audio.m4a` - Audio file
- Links to test:
  - https://instagram.com/p/example
  - https://tiktok.com/@user/video/123
  - https://youtube.com/watch?v=example

---

## Test Cases

### TC-01: Light Mode Page Design (AC1)

**Objective**: Verify Deep-Capture page has light mode design and correct accessibility

**Steps**:
1. Navigate directly to `/deep-capture` in browser
2. Observe page design and color scheme

**Expected Results**:
- [ ] Page loads successfully
- [ ] Background is cream/white (#f5f5dc)
- [ ] Text is dark (readable contrast)
- [ ] Layout is clean and minimal (Apple Notes aesthetic)
- [ ] No dark mode elements visible
- [ ] Page is distinct from Live-Capture (which is dark mode)

**Priority**: P1
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-02: Navigation from Live-Capture (Multi-line Paste)

**Objective**: Verify auto-transition from Live-Capture on multi-line paste

**Steps**:
1. Go to `/capture` (Live-Capture)
2. Copy multi-line text (e.g., 3 lines of text)
3. Paste into Live-Capture text box

**Expected Results**:
- [ ] Auto-transition to `/deep-capture` occurs
- [ ] Pasted text is pre-populated in text input
- [ ] Text is auto-split into separate boxes (one per line)
- [ ] Each split box shows the corresponding line of text

**Priority**: P0
**Status**: [ ] Pass [ ] Fail [ ] Blocked

**Notes**: This test depends on Live-Capture implementation detecting multi-line paste. If not implemented, mark as BLOCKED.

---

### TC-03: Navigation from Live-Capture (Double-Click & Hold)

**Objective**: Verify manual transition via double-click & hold gesture

**Steps**:
1. Go to `/capture` (Live-Capture)
2. Enter some text (single or multi-line)
3. Double-click and hold on the text area

**Expected Results**:
- [ ] Transition to `/deep-capture` occurs
- [ ] Text is carried over via query param
- [ ] Text is pre-populated in Deep-Capture

**Priority**: P1
**Status**: [ ] Pass [ ] Fail [ ] Blocked

**Notes**: If gesture not implemented in Live-Capture, mark as BLOCKED.

---

### TC-04: Direct Navigation with Query Param (AC1, AC2)

**Objective**: Verify text pre-population from query parameter

**Steps**:
1. Navigate to `/deep-capture?text=Test%20line%201%0ATest%20line%202`
2. Observe text input and preview

**Expected Results**:
- [ ] Text input shows "Test line 1\nTest line 2"
- [ ] Auto-split preview shows 2 separate boxes
- [ ] Box 1 contains "Test line 1"
- [ ] Box 2 contains "Test line 2"
- [ ] Counter shows "2 somethings ready to upload"

**Priority**: P0
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-05: Text Input and Auto-Split (AC2, AC4)

**Objective**: Verify text input and auto-split functionality

**Steps**:
1. Go to `/deep-capture`
2. Type or paste multi-line text:
   ```
   First item
   Second item
   Third item
   ```
3. Observe the split preview

**Expected Results**:
- [ ] Text appears in large text editor at top
- [ ] Auto-split preview appears below
- [ ] 3 separate boxes displayed (stacked vertically)
- [ ] Each box shows corresponding line
- [ ] Each box has border and is editable
- [ ] Counter shows "3 somethings ready to upload"

**Priority**: P0
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-06: Edit Split Text (AC4)

**Objective**: Verify split text boxes are editable

**Steps**:
1. Create splits as in TC-05
2. Click into the second split box
3. Modify the text (e.g., change "Second item" to "Modified item")

**Expected Results**:
- [ ] Text box accepts keyboard input
- [ ] Changes are reflected in the split preview
- [ ] Modified text will be submitted when send is clicked

**Priority**: P1
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-07: Delete Split (AC4)

**Objective**: Verify delete functionality for split boxes

**Steps**:
1. Create 3 splits as in TC-05
2. Click the delete icon (Ã—) on the second split box
3. Observe the remaining splits

**Expected Results**:
- [ ] Delete icon (Ã—) is visible on top-right of each box
- [ ] Clicking delete removes that split
- [ ] Remaining splits: "First item" and "Third item"
- [ ] Counter updates to "2 somethings ready to upload"
- [ ] No errors in console

**Priority**: P0
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-08: Merge Splits (AC4)

**Objective**: Verify merge functionality between split boxes

**Steps**:
1. Create 3 splits as in TC-05
2. Look for merge UI (click between boxes or merge button)
3. Attempt to merge first two boxes

**Expected Results**:
- [ ] Merge UI is available (inline, not modal)
- [ ] Clicking merge combines boxes
- [ ] Merged box contains: "First item\nSecond item"
- [ ] Counter updates to "2 somethings ready to upload"

**Priority**: P2
**Status**: [ ] Pass [ ] Fail [ ] Blocked

**Notes**: Based on code review, merge function exists but UI may not be exposed. If no merge UI found, mark as BLOCKED and note for future implementation.

---

### TC-09: File Upload Interface (AC3)

**Objective**: Verify file upload zone and drag-drop

**Steps**:
1. Go to `/deep-capture`
2. Locate the file upload zone
3. Click the upload zone
4. Select multiple files (photo + video)

**Expected Results**:
- [ ] File upload zone visible with dashed border
- [ ] Text says "Click to upload files or drag and drop"
- [ ] Supported types listed: "Photos, videos, handwritten images, audio"
- [ ] File picker opens on click
- [ ] Multiple files can be selected
- [ ] Accepts image/*, video/*, audio/* files

**Priority**: P0
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-10: Photo Upload (AC3, AC8)

**Objective**: Verify photo file upload and storage

**Steps**:
1. Go to `/deep-capture`
2. Upload a photo file (JPG or PNG)
3. Wait for upload to complete
4. Observe the preview

**Expected Results**:
- [ ] "Uploading..." status shown
- [ ] Photo uploads to Supabase Storage
- [ ] Preview shows uploaded photo thumbnail
- [ ] "Photo uploaded" message displayed
- [ ] Delete icon (Ã—) available on preview
- [ ] Counter increments

**Priority**: P0
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-11: Video Upload (AC3, AC8)

**Objective**: Verify video file upload

**Steps**:
1. Go to `/deep-capture`
2. Upload a video file (MP4 or MOV)
3. Wait for upload to complete

**Expected Results**:
- [ ] "Uploading..." status shown
- [ ] Video uploads to Supabase Storage
- [ ] "Video uploaded" message displayed
- [ ] Delete icon (Ã—) available
- [ ] Counter increments

**Priority**: P1
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-12: OCR for Handwritten Image (AC5)

**Objective**: Verify OCR text extraction from handwritten images

**Steps**:
1. Go to `/deep-capture`
2. Upload an image containing handwritten text
3. Wait for OCR processing

**Expected Results**:
- [ ] "Extracting text..." status shown
- [ ] OCR extracts text from image
- [ ] Extracted text appears in editable text box
- [ ] Label says "Extracted text:"
- [ ] Text can be edited before sending
- [ ] Image file is NOT uploaded to storage (only text)
- [ ] Counter increments

**Priority**: P0
**Status**: [ ] Pass [ ] Fail [ ] Blocked

**Notes**: If OCR fails or returns empty, verify error message is shown.

---

### TC-13: OCR Error Handling (AC5)

**Objective**: Verify error handling when OCR fails

**Steps**:
1. Go to `/deep-capture`
2. Upload an image with no text (e.g., solid color image)
3. Wait for OCR processing

**Expected Results**:
- [ ] OCR attempts to process
- [ ] If no text found, image is uploaded as photo (fallback)
- [ ] OR error message: "Could not extract text from image"
- [ ] User has option to skip or retry
- [ ] No crash or console errors

**Priority**: P1
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-14: Audio Transcription Not Supported (AC6)

**Objective**: Verify audio file handling with placeholder transcription

**Steps**:
1. Go to `/deep-capture`
2. Upload an audio file (M4A, MP3, or WAV)
3. Wait for processing

**Expected Results**:
- [ ] "Transcribing..." status shown
- [ ] Message appears: "Audio transcription not yet supported"
- [ ] Audio file is NOT uploaded to storage
- [ ] No something created for audio (skipped)
- [ ] Counter does NOT increment
- [ ] User can delete the failed audio item

**Priority**: P0
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-15: Link Input and Preview (AC7)

**Objective**: Verify URL input and link preview functionality

**Steps**:
1. Go to `/deep-capture`
2. Locate the link input field
3. Paste a URL: `https://instagram.com/p/example123`
4. Press Enter or click "Add" button

**Expected Results**:
- [ ] Link input field visible with placeholder
- [ ] "Add" button visible
- [ ] After entering URL, preview card appears
- [ ] Card shows URL (title if metadata available)
- [ ] Preview is added to items list
- [ ] Counter increments
- [ ] Link input clears after successful add

**Priority**: P0
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-16: Invalid URL Handling (AC7)

**Objective**: Verify error handling for invalid URLs

**Steps**:
1. Go to `/deep-capture`
2. Enter invalid URL: `not a url`
3. Click "Add"

**Expected Results**:
- [ ] Error message: "Please enter a valid URL"
- [ ] Link is NOT added to items
- [ ] Input is NOT cleared
- [ ] User can correct and retry

**Priority**: P1
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-17: Link Preview Fallback (AC7)

**Objective**: Verify fallback when metadata fetch fails

**Steps**:
1. Go to `/deep-capture`
2. Add a URL that has no metadata available
3. Observe the preview

**Expected Results**:
- [ ] Preview card still appears
- [ ] Shows URL as plain text
- [ ] No image or rich preview (graceful degradation)
- [ ] Link can still be submitted

**Priority**: P2
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-18: Mixed Content Upload (AC3, AC4, AC7)

**Objective**: Verify multiple content types can be prepared simultaneously

**Steps**:
1. Go to `/deep-capture`
2. Enter multi-line text (3 lines)
3. Upload 1 photo
4. Add 1 link
5. Observe all items in preview

**Expected Results**:
- [ ] All items displayed in stacked preview
- [ ] 3 text splits shown
- [ ] 1 photo preview shown
- [ ] 1 link preview shown
- [ ] Counter shows "5 somethings ready to upload"
- [ ] Each item can be edited or deleted independently

**Priority**: P0
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-19: Rocket Ship Send Button (AC8)

**Objective**: Verify send button appearance and behavior

**Steps**:
1. Prepare some items (text, photo, link)
2. Locate rocket ship button

**Expected Results**:
- [ ] Rocket ship ðŸš€ button visible
- [ ] Positioned at bottom-right
- [ ] Fixed position (stays visible when scrolling)
- [ ] Button is enabled when items are ready
- [ ] Button is disabled when no items or items processing
- [ ] Hover effect visible

**Priority**: P0
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-20: Send All Items (AC8)

**Objective**: Verify batch submission of all prepared items

**Steps**:
1. Prepare mixed items: 2 text, 1 photo, 1 link
2. Click rocket ship send button
3. Observe submission process

**Expected Results**:
- [ ] Rocket animation plays (flies away, ~1 second)
- [ ] Loading state shown during submission
- [ ] All items submitted in parallel (check Network tab)
- [ ] After success, navigates to `/capture`
- [ ] Live-Capture page is cleared (no text, no localStorage)

**Priority**: P0
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-21: Send Error Handling (AC8)

**Objective**: Verify error handling when submission fails

**Steps**:
1. Prepare some items
2. Disconnect network (or use DevTools to simulate failure)
3. Click send button

**Expected Results**:
- [ ] Error message shown: "Failed to submit. Please try again."
- [ ] User stays on Deep-Capture page
- [ ] Items are NOT lost (data preserved)
- [ ] User can retry submission
- [ ] No navigation occurs

**Priority**: P0
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-22: Send Validation (AC8)

**Objective**: Verify validation prevents sending with no items

**Steps**:
1. Go to `/deep-capture` with no items
2. Try to click send button

**Expected Results**:
- [ ] Send button is disabled
- [ ] OR clicking shows error: "Please add some text or upload files before sending"
- [ ] No submission occurs

**Priority**: P1
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-23: No Auto-Submit (AC10)

**Objective**: Verify items are NOT auto-submitted after upload

**Steps**:
1. Go to `/deep-capture`
2. Upload a photo
3. Wait for upload to complete
4. Do NOT click send

**Expected Results**:
- [ ] Photo upload completes and shows preview
- [ ] Page stays on Deep-Capture
- [ ] No automatic navigation to Live-Capture
- [ ] Send button must be explicitly clicked

**Priority**: P0
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-24: Return to Live-Capture (AC8)

**Objective**: Verify successful return to Live-Capture after send

**Steps**:
1. Prepare and send items successfully
2. Wait for navigation
3. Observe Live-Capture state

**Expected Results**:
- [ ] Navigates to `/capture`
- [ ] Live-Capture is in clean state
- [ ] Text input is empty
- [ ] No localStorage data
- [ ] User can immediately capture new items

**Priority**: P0
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-25: File Upload Progress (AC9)

**Objective**: Verify visual feedback during file processing

**Steps**:
1. Upload multiple files (photo + video)
2. Observe progress indicators

**Expected Results**:
- [ ] Each file shows individual status
- [ ] Photo: "Uploading..." â†’ "Photo uploaded" + thumbnail
- [ ] Video: "Uploading..." â†’ "Video uploaded"
- [ ] OCR image: "Extracting text..." â†’ text box
- [ ] Audio: "Transcribing..." â†’ "not yet supported"
- [ ] Clear visual distinction between processing and complete states

**Priority**: P1
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-26: Rocket Animation (AC8, AC9)

**Objective**: Verify rocket ship animation on send

**Steps**:
1. Prepare items and click send
2. Watch the rocket button closely

**Expected Results**:
- [ ] Rocket ship flies away (zoom into corner)
- [ ] Animation is smooth (~1 second duration)
- [ ] Animation completes before navigation
- [ ] (Optional) Files "zoom into corner" effect

**Priority**: P2
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-27: Responsive Layout

**Objective**: Verify layout works on different screen sizes

**Steps**:
1. Test on desktop (1920x1080)
2. Test on tablet (768x1024)
3. Test on mobile (375x667)

**Expected Results**:
- [ ] Layout adapts to screen size
- [ ] Text input is usable on all sizes
- [ ] Split previews are readable
- [ ] File upload zone is accessible
- [ ] Send button is visible and accessible
- [ ] No horizontal scrolling

**Priority**: P1
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-28: Browser Compatibility

**Objective**: Verify functionality across browsers

**Steps**:
1. Test in Chrome
2. Test in Firefox
3. Test in Safari (if available)
4. Test in Edge

**Expected Results**:
- [ ] All features work in Chrome
- [ ] All features work in Firefox
- [ ] All features work in Safari
- [ ] All features work in Edge
- [ ] No browser-specific errors

**Priority**: P2
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

## Summary

**Total Test Cases**: 28
**P0 (Critical)**: 15
**P1 (High)**: 9
**P2 (Medium)**: 4

**Pass Criteria**: All P0 and P1 tests must pass. P2 tests are nice-to-have.

**Test Completion**: [x] All tests executed
**Overall Status**: [x] Pass [ ] Fail
**Ready for Done**: [x] Yes [ ] No

**Tested By**: User
**Test Date**: 2025-11-09
**Notes**: All critical features tested and working. OCR removed as planned. Drag-and-drop working with visual feedback. Photo/video previews displaying correctly. Audio upload support added. Empty items auto-delete. All fixes implemented successfully.

---

## Defects Found

| ID | Severity | Description | Steps to Reproduce | Status |
|----|----------|-------------|-------------------|--------|
| | | | | |

---

## Notes for Tester

1. **OCR Testing**: Use clear handwritten images for best results. Tesseract.js works best with high-contrast, printed-style text.
2. **Audio Files**: Expected to show "not yet supported" message - this is correct MVP behavior.
3. **Link Preview**: Currently shows basic URL only (metadata fetching is placeholder) - this is expected.
4. **Merge UI**: May not be exposed in UI even though logic exists - mark as BLOCKED if not found.
5. **Live-Capture Integration**: TC-02 and TC-03 depend on Live-Capture detecting multi-line paste and double-click & hold - if these triggers aren't implemented in Live-Capture yet, mark those tests as BLOCKED.

---

## Acceptance Sign-Off

**QA Approval**: ________________  Date: ________
**Product Owner Approval**: ________________  Date: ________
**Developer Confirmation**: ________________  Date: ________
