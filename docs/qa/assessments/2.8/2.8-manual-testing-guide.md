# Manual Testing Guide: Story 2.8 - Mind Card View (Pok√©mon Card Style)

**Story**: 2.8
**Feature**: Mind Card Detail View with Pok√©mon-style layout
**Test Date**: 2025-11-06
**Tested By**: ___________________
**Environment**: ‚ñ° Local Dev  ‚ñ° Staging  ‚ñ° Production

---

## Pre-Testing Setup

### Prerequisites
- [ ] Application is running locally or accessible on test environment
- [ ] Test user account exists with login credentials
- [ ] Database has test Mind somethings created (or ability to create them)
- [ ] Browser developer tools available for inspection

### Test Data Setup

Create the following test Mind somethings before testing:

1. **Experience Card** (ID: `exp-test-1`)
   - Category: `experience`
   - Text: "First visit to the Grand Canyon with family. The view was breathtaking."
   - Media: Photo of canyon (if available)
   - Care: 5 (Love)
   - Location: "Grand Canyon", lat: 36.1069, lng: -112.1129
   - Why: "This moment reminded me how small we are and how beautiful nature is."

2. **Thought Card** (ID: `thought-test-1`)
   - Category: `thought` (or leave null for default)
   - Text: "Sometimes I wonder if we're making the right decisions.\nLife feels uncertain lately.\nBut maybe that's okay."
   - Care: 3 (Neutral)
   - No location
   - Why: null

3. **Desire Card with Dependencies** (ID: `desire-test-1`)
   - Category: `desire`
   - Text: "Learn to play F√ºr Elise on piano"
   - Care: 5 (Love)
   - Intensity: 0.8 (Strong)
   - Status: "active"
   - Why: "Music has always been my escape. Mastering this piece would feel like a personal achievement."
   - Dependencies: 2 other desires (one fulfilled, one active)

4. **Empty Content Card** (ID: `empty-test-1`)
   - No text content
   - No media
   - Care: 2 (Dislike)

5. **Card with Multiple Media** (ID: `media-test-1`)
   - Text: "Beach vacation memories"
   - Media: Array of 3 images
   - Care: 4 (Like)

---

## Test Scenarios

### AC 1: Dynamic Route and Auth

#### Test 1.1: View Valid Mind Card
**Given**: User is logged in
**When**: Navigate to `/mind/{valid-id}`
**Then**:
- [ ] Page loads successfully (HTTP 200)
- [ ] Mind card displays with all content
- [ ] No errors in browser console
- [ ] URL remains `/mind/{id}` (no redirects)

**Test Data**: Use `exp-test-1`

---

#### Test 1.2: Auth Redirect When Not Logged In
**Given**: User is NOT logged in
**When**: Navigate to `/mind/{valid-id}`
**Then**:
- [ ] Redirects to `/login` page
- [ ] URL changes to `/login`
- [ ] No Mind card content visible
- [ ] After login, can successfully view the card

**Test Data**: Use `exp-test-1` (logout first)

---

#### Test 1.3: 404 for Invalid ID
**Given**: User is logged in
**When**: Navigate to `/mind/invalid-uuid-format`
**Then**:
- [ ] Shows 404 page
- [ ] URL shows `/mind/invalid-uuid-format` (or 404 route)
- [ ] No error in console beyond expected 404

**Test Data**: Use URL `/mind/not-a-uuid`

---

#### Test 1.4: 404 for Non-Existent ID
**Given**: User is logged in
**When**: Navigate to `/mind/00000000-0000-0000-0000-000000000000`
**Then**:
- [ ] Shows 404 page
- [ ] URL shows the invalid UUID
- [ ] No sensitive error messages displayed

---

#### Test 1.5: 404 for Non-Mind Realm
**Given**: User is logged in and has a Physical something with ID `{physical-id}`
**When**: Navigate to `/mind/{physical-id}`
**Then**:
- [ ] Shows 404 page (because realm != 'mind')
- [ ] Cannot view Physical somethings via Mind route

---

### AC 2 & 3: Pok√©mon Card Layout and Category Badges

#### Test 2.1: Experience Card Badge
**Given**: User views Experience card
**When**: Card loads
**Then**:
- [ ] Top section displays üé≠ icon
- [ ] Badge shows "EXPERIENCE" in large bold text
- [ ] Subtitle shows "Past Memory"
- [ ] Purple gradient background on header
- [ ] Card has 3 distinct sections (header, content, attributes)
- [ ] Desktop: Card max-width 800px, centered
- [ ] Mobile: Card full-width with padding

**Test Data**: `exp-test-1`
**Viewport**: Desktop (1920x1080), then Mobile (375x667)

---

#### Test 2.2: Thought Card Badge (Default)
**Given**: User views Thought card (or card with no category)
**When**: Card loads
**Then**:
- [ ] Top section displays üí≠ icon
- [ ] Badge shows "THOUGHT" in large bold text
- [ ] Subtitle shows "Reflection"
- [ ] Purple gradient background on header

**Test Data**: `thought-test-1`

---

#### Test 2.3: Desire Card Badge
**Given**: User views Desire card
**When**: Card loads
**Then**:
- [ ] Top section displays ‚ú® icon
- [ ] Badge shows "DESIRE" in large bold text
- [ ] Subtitle shows "Future Aspiration"
- [ ] Purple gradient background on header

**Test Data**: `desire-test-1`

---

### AC 4: Content Display

#### Test 4.1: Text Content with Line Breaks
**Given**: Mind card has multi-line text content
**When**: Card loads
**Then**:
- [ ] All text displays in content section
- [ ] Line breaks are preserved (appears on separate lines)
- [ ] Text is readable (good contrast, appropriate size)
- [ ] No truncation of content
- [ ] Text wraps appropriately on small screens

**Test Data**: `thought-test-1` (has line breaks)

---

#### Test 4.2: Media Display (Single Image)
**Given**: Mind card has single media_url
**When**: Card loads
**Then**:
- [ ] Image displays in content section
- [ ] Image is properly sized (not overflowing)
- [ ] Image maintains aspect ratio
- [ ] No slideshow controls visible (only 1 image)

**Test Data**: `exp-test-1`

---

#### Test 4.3: Media Slideshow (Multiple Images)
**Given**: Mind card has multiple media_url entries
**When**: Card loads
**Then**:
- [ ] First image displays initially
- [ ] Slideshow controls appear (‚Üê and ‚Üí buttons)
- [ ] Counter shows "1 / 3" (or appropriate count)
- [ ] Clicking ‚Üí advances to next image
- [ ] Clicking ‚Üê goes to previous image
- [ ] Counter updates correctly
- [ ] At last image, ‚Üí wraps to first
- [ ] At first image, ‚Üê wraps to last

**Test Data**: `media-test-1`

---

#### Test 4.4: "Why This Matters" Section
**Given**: Mind card has `attributes.why` field
**When**: Card loads
**Then**:
- [ ] Section appears between content and attributes
- [ ] Header displays "Why this matters:"
- [ ] Why text displays with preserved line breaks
- [ ] Section has distinct styling (gray background, purple left border)
- [ ] Text is readable and properly formatted

**Test Data**: `exp-test-1` or `desire-test-1`

---

#### Test 4.5: Empty State
**Given**: Mind card has NO text_content and NO media_url
**When**: Card loads
**Then**:
- [ ] Content section shows "No content recorded" message
- [ ] Message is centered and styled appropriately
- [ ] No broken image placeholders
- [ ] Attributes section still displays

**Test Data**: `empty-test-1`

---

### AC 5: Base Attributes Panel

#### Test 5.1: Timestamp Display
**Given**: Mind card has captured_at timestamp
**When**: Card loads
**Then**:
- [ ] Time attribute shows üïê icon
- [ ] Format: "November 5, 2025, 3:45 PM" (long format)
- [ ] Time is accurate to the captured_at value
- [ ] Timezone handling is correct

**Test Data**: Any test card, verify timestamp format

---

#### Test 5.2: Care Rating (5 Stars - Love)
**Given**: Mind card has care=5
**When**: Card loads
**Then**:
- [ ] Care attribute shows ‚ù§Ô∏è icon
- [ ] Displays "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ (Love)"
- [ ] All 5 stars are filled
- [ ] "Love" label appears
- [ ] Card brightness is high (opacity near 1.0)

**Test Data**: `exp-test-1` or `desire-test-1`

---

#### Test 5.3: Care Rating (1 Star - Hate)
**Given**: Mind card has care=1
**When**: Card loads
**Then**:
- [ ] Displays "‚òÖ‚òÜ‚òÜ‚òÜ‚òÜ (Hate)"
- [ ] Only 1 star filled, 4 empty stars
- [ ] "Hate" label appears
- [ ] Card brightness is dim (opacity near 0.4)

**Test Data**: Create test card with care=1

---

#### Test 5.4: Care Rating (3 Stars - Neutral)
**Given**: Mind card has care=3
**When**: Card loads
**Then**:
- [ ] Displays "‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ (Neutral)"
- [ ] 3 filled stars, 2 empty
- [ ] "Neutral" label appears
- [ ] Card brightness is medium

**Test Data**: `thought-test-1`

---

#### Test 5.5: Physical Location with Map Link
**Given**: Mind card has location_name, latitude, longitude
**When**: Card loads
**Then**:
- [ ] Location attribute shows üìç icon
- [ ] Displays location name "Grand Canyon"
- [ ] Shows coordinates in format "36.1069¬∞N, 112.1129¬∞W"
- [ ] "View on Map" button is visible and clickable
- [ ] Button has purple background
- [ ] Clicking button navigates to `/my_reality?lat=36.1069&lng=-112.1129&zoom=15`
- [ ] Physical map loads with marker at that location

**Test Data**: `exp-test-1`

---

#### Test 5.6: No Physical Location
**Given**: Mind card has NO location_name
**When**: Card loads
**Then**:
- [ ] Location attribute shows üìç icon
- [ ] Displays "No physical location linked" in gray text
- [ ] No coordinates shown
- [ ] No "View on Map" button

**Test Data**: `thought-test-1`

---

#### Test 5.7: Sun/Domain - Default "Somewhere"
**Given**: Mind card has no sun_domain or sun_domain='somewhere'
**When**: Card loads
**Then**:
- [ ] Domain attribute shows üóëÔ∏è icon
- [ ] Displays "Domain: Somewhere"

**Test Data**: Most test cards (default)

---

#### Test 5.8: Sun/Domain - Custom Domains
**Given**: Mind card has sun_domain='beauty' or 'ugly' or 'dreams'
**When**: Card loads
**Then**:
- [ ] Beauty: Shows ‚òÄÔ∏è icon + "Domain: Beauty"
- [ ] Ugly: Shows üåë icon + "Domain: Ugly"
- [ ] Dreams: Shows üí´ icon + "Domain: Dreams"

**Test Data**: Create cards with custom sun_domain values

---

#### Test 5.9: Tags Placeholder
**Given**: Any Mind card
**When**: Card loads
**Then**:
- [ ] Tags attribute shows üè∑Ô∏è icon
- [ ] Displays "Tags: Coming soon" in gray text
- [ ] No interactive elements (placeholder only)

**Test Data**: Any test card

---

#### Test 5.10: Connection Count - Zero
**Given**: Mind card has NO connections in connections table
**When**: Card loads
**Then**:
- [ ] Connections attribute shows üîó icon
- [ ] Displays "Connections: No connections yet"

**Test Data**: `thought-test-1` (assuming no connections)

---

#### Test 5.11: Connection Count - Multiple
**Given**: Mind card has 3 connections (bidirectional query)
**When**: Card loads
**Then**:
- [ ] Displays "Connections: 3 connections"
- [ ] Count is accurate (check database)
- [ ] Includes both from_something_id and to_something_id matches

**Test Data**: Create connections for test card, verify count

---

### AC 6: Desire-Specific Attributes

#### Test 6.1: Intensity Bar (Desire Only)
**Given**: Mind card is Desire category with desire_intensity=0.8
**When**: Card loads
**Then**:
- [ ] Intensity bar shows üî• icon
- [ ] Label shows "Intensity: Strong"
- [ ] Visual bar is 80% filled with orange-to-red gradient
- [ ] Numeric value "0.8" appears
- [ ] Bar is responsive and properly sized

**Test Data**: `desire-test-1`

**Verify Intensity Labels**:
- intensity < 0.3 ‚Üí "Mild"
- intensity < 0.6 ‚Üí "Moderate"
- intensity < 0.85 ‚Üí "Strong"
- intensity >= 0.85 ‚Üí "Intense"

---

#### Test 6.2: Status Badge (Desire Only)
**Given**: Mind card is Desire category with desire_status
**When**: Card loads
**Then**:
- [ ] Status shows ‚úÖ icon
- [ ] Displays "Status: Active" (or appropriate status)
- [ ] Color-coded correctly:
  - Nascent: Gray (text-gray-400)
  - Active: Blue (text-blue-400)
  - Fulfilled: Green (text-green-400)

**Test Data**: `desire-test-1` (status='active')

---

#### Test 6.3: Dependencies List (Desire Only)
**Given**: Desire card has 2 dependencies (depends_on relationships)
**When**: Card loads
**Then**:
- [ ] Dependencies section shows üìã icon
- [ ] Header displays "Depends on:"
- [ ] Lists 2 dependency items
- [ ] Fulfilled dependency shows ‚úì icon
- [ ] In-progress dependency shows ‚è≥ icon
- [ ] Each dependency shows truncated text (60 chars max)
- [ ] Each dependency is clickable link to `/mind/{dep-id}`
- [ ] Clicking link navigates to dependency card

**Test Data**: `desire-test-1`

---

#### Test 6.4: Non-Desire Cards (No Desire Attributes)
**Given**: Mind card is NOT Desire category
**When**: Card loads
**Then**:
- [ ] No intensity bar visible
- [ ] No status badge visible
- [ ] No dependencies section visible

**Test Data**: `exp-test-1` or `thought-test-1`

---

### AC 7: Care Rating Visual Scale

_Covered in Test 5.2, 5.3, 5.4 above_

---

### AC 8: Action Buttons

#### Test 8.1: Back Button
**Given**: User is on Mind card detail page
**When**: Click [Back] button
**Then**:
- [ ] Navigates to previous page (browser back)
- [ ] If no history, goes to `/mind` list view

**Test Data**: Any card

---

#### Test 8.2: Edit Button
**Given**: User is on Mind card detail page
**When**: Click [Edit] button
**Then**:
- [ ] Navigates to `/mind/{id}/edit` route
- [ ] (Implementation deferred, may show 404 or placeholder)

**Test Data**: Any card

---

#### Test 8.3: Delete Button Opens Modal
**Given**: User is on Mind card detail page
**When**: Click [Delete] button
**Then**:
- [ ] Delete confirmation modal appears
- [ ] Modal displays warning message
- [ ] Modal has [Cancel] and [Delete] buttons
- [ ] Background is dimmed (overlay)
- [ ] Page behind modal is not scrollable

**Test Data**: Any card

---

### AC 9: Previous/Next Navigation

#### Test 9.1: Previous Button (Not First Card)
**Given**: User views Mind card that is NOT the first (by captured_at)
**When**: Card loads
**Then**:
- [ ] [‚Üê Previous] button appears at bottom
- [ ] Button is enabled (not grayed out)
- [ ] Clicking button navigates to previous Mind card
- [ ] Navigation maintains sort order (captured_at ascending)

**Test Data**: Second card in chronological order

---

#### Test 9.2: Next Button (Not Last Card)
**Given**: User views Mind card that is NOT the last (by captured_at)
**When**: Card loads
**Then**:
- [ ] [Next ‚Üí] button appears at bottom
- [ ] Button is enabled (not grayed out)
- [ ] Clicking button navigates to next Mind card
- [ ] Navigation maintains sort order

**Test Data**: First or middle card in chronological order

---

#### Test 9.3: Boundaries (First Card)
**Given**: User views the FIRST Mind card (earliest captured_at)
**When**: Card loads
**Then**:
- [ ] NO [‚Üê Previous] button visible
- [ ] [Next ‚Üí] button is visible and functional

**Test Data**: Oldest Mind card

---

#### Test 9.4: Boundaries (Last Card)
**Given**: User views the LAST Mind card (latest captured_at)
**When**: Card loads
**Then**:
- [ ] [‚Üê Previous] button is visible and functional
- [ ] NO [Next ‚Üí] button visible

**Test Data**: Newest Mind card

---

#### Test 9.5: Only One Card
**Given**: User has ONLY ONE Mind card in database
**When**: Card loads
**Then**:
- [ ] NO Previous/Next buttons visible
- [ ] Navigation section not displayed

**Test Data**: Delete all but one Mind card

---

### AC 10: Delete Confirmation Modal

#### Test 10.1: Cancel Button
**Given**: Delete modal is open
**When**: Click [Cancel] button
**Then**:
- [ ] Modal closes
- [ ] Returns to card view
- [ ] Card is NOT deleted (verify in database/UI)

**Test Data**: Any card

---

#### Test 10.2: Confirm Delete
**Given**: Delete modal is open
**When**: Click [Delete] button
**Then**:
- [ ] Loading state appears (if implemented)
- [ ] DELETE API request sent to `/api/somethings/{id}`
- [ ] Response is 200 OK
- [ ] Redirects to `/mind` list view
- [ ] Card no longer appears in list
- [ ] Database record deleted (verify via SQL query)
- [ ] Associated connections also deleted (CASCADE)

**Test Data**: Create test card for deletion, verify cascade

---

#### Test 10.3: ESC Key Closes Modal
**Given**: Delete modal is open
**When**: Press ESC key
**Then**:
- [ ] Modal closes
- [ ] Card is NOT deleted

**Test Data**: Any card

---

#### Test 10.4: Click Outside Closes Modal
**Given**: Delete modal is open
**When**: Click on dimmed background (outside modal)
**Then**:
- [ ] Modal closes
- [ ] Card is NOT deleted

**Test Data**: Any card

---

#### Test 10.5: Delete Error Handling
**Given**: Delete API fails (simulate server error)
**When**: Confirm delete
**Then**:
- [ ] Error message appears ("Failed to delete. Please try again.")
- [ ] User remains on card page
- [ ] Card is NOT deleted
- [ ] Can retry delete operation

**Test Data**: Mock API failure (or test with invalid state)

---

### AC 11 & 12: API Endpoints

_API endpoints are tested via unit tests and integration tests above_

---

## Responsive Design Testing

### Test R1: Desktop (1920x1080)
**Given**: Browser window is 1920x1080
**When**: View any Mind card
**Then**:
- [ ] Card is centered on screen
- [ ] Card max-width is 800px
- [ ] Margins on left/right
- [ ] All content readable and well-spaced
- [ ] Action buttons in horizontal row

---

### Test R2: Tablet (768x1024)
**Given**: Browser window is 768x1024
**When**: View any Mind card
**Then**:
- [ ] Card adjusts to tablet width
- [ ] Padding is appropriate
- [ ] Media scales correctly
- [ ] All text readable
- [ ] Buttons remain horizontal

---

### Test R3: Mobile (375x667)
**Given**: Browser window is 375x667
**When**: View any Mind card
**Then**:
- [ ] Card is full-width with 16px padding
- [ ] Attributes stack vertically
- [ ] Action buttons may stack vertically or wrap
- [ ] Media fits within screen width
- [ ] No horizontal scrolling required
- [ ] Touch targets are sufficiently large (44x44px minimum)

---

## Accessibility Testing

### Test A1: Semantic HTML
**Given**: View any Mind card
**When**: Inspect with DevTools
**Then**:
- [ ] Card uses `<article>` or semantic structure
- [ ] Header uses `<header>` or appropriate heading
- [ ] Sections use `<section>` tags
- [ ] Modal has `role="dialog"` and `aria-modal="true"`

---

### Test A2: Keyboard Navigation
**Given**: User navigates with keyboard only
**When**: Tab through page
**Then**:
- [ ] Can tab to all interactive elements (buttons, links)
- [ ] Focus indicators visible
- [ ] Tab order is logical (top to bottom)
- [ ] Modal traps focus (tabs within modal only)
- [ ] ESC closes modal

---

### Test A3: Screen Reader (Optional)
**Given**: Screen reader is enabled
**When**: Navigate through card
**Then**:
- [ ] All content is announced
- [ ] Images have alt text
- [ ] Buttons have descriptive labels
- [ ] Modal is properly announced

---

### Test A4: Color Contrast
**Given**: View card with care=1 (dim)
**When**: Check contrast ratios
**Then**:
- [ ] Text on background meets WCAG AA (4.5:1 for text)
- [ ] Even at lowest brightness, text is readable

---

## Performance Testing

### Test P1: Page Load Time
**Given**: User navigates to Mind card
**When**: Measure load time
**Then**:
- [ ] Page loads in < 2 seconds (local)
- [ ] SSR delivers full HTML (no loading spinner)
- [ ] Images load progressively (lazy loading)

---

### Test P2: Database Query Efficiency
**Given**: View Mind card
**When**: Check database queries (via logging)
**Then**:
- [ ] Only 1 main query for something data
- [ ] 1 query for connection count
- [ ] 1 query for dependencies (if Desire)
- [ ] 1 query for adjacent somethings (Prev/Next)
- [ ] No N+1 query problems
- [ ] Total queries ‚â§ 4

---

## Edge Cases

### Test E1: Very Long Text Content
**Given**: Mind card has 5000+ characters of text
**When**: Card loads
**Then**:
- [ ] All text displays (no truncation)
- [ ] Content section is scrollable if needed
- [ ] No layout breaking
- [ ] Performance remains acceptable

---

### Test E2: Special Characters in Text
**Given**: Mind card has emoji, unicode, special chars
**When**: Card loads
**Then**:
- [ ] All characters render correctly
- [ ] No encoding issues
- [ ] Layout not broken by wide characters

---

### Test E3: Missing Optional Fields
**Given**: Mind card has minimal data (only required fields)
**When**: Card loads
**Then**:
- [ ] No JavaScript errors
- [ ] Graceful handling of null/undefined values
- [ ] Appropriate default or empty states

---

### Test E4: Invalid Media URL
**Given**: Mind card has invalid/broken media_url
**When**: Card loads
**Then**:
- [ ] Shows broken image placeholder or error state
- [ ] Does not break entire card
- [ ] User can still view text content and attributes

---

### Test E5: High Connection Count
**Given**: Mind card has 100+ connections
**When**: Card loads
**Then**:
- [ ] Count displays correctly (e.g., "147 connections")
- [ ] No performance degradation
- [ ] Query remains efficient

---

## Cross-Browser Testing

### Test B1: Chrome/Edge (Chromium)
- [ ] All features work as expected
- [ ] Layout is correct
- [ ] No console errors

### Test B2: Firefox
- [ ] All features work as expected
- [ ] Layout is correct
- [ ] No console errors

### Test B3: Safari (if available)
- [ ] All features work as expected
- [ ] Layout is correct
- [ ] No console errors

---

## Security Testing

### Test S1: Cannot View Other Users' Cards
**Given**: User A is logged in
**When**: User A tries to access User B's Mind card URL
**Then**:
- [ ] Returns 404 (not visible due to RLS)
- [ ] No data leakage in response

---

### Test S2: Cannot Delete Other Users' Cards
**Given**: User A is logged in
**When**: User A sends DELETE request for User B's card
**Then**:
- [ ] Returns 404 or 401
- [ ] Card is NOT deleted
- [ ] RLS policy enforced

---

### Test S3: Auth Required for All Operations
**Given**: User is NOT logged in
**When**: Access any Mind card URL
**Then**:
- [ ] Redirects to login
- [ ] No card data visible before auth

---

## Test Summary

| Category | Total Tests | Passed | Failed | Notes |
|----------|-------------|--------|--------|-------|
| Auth & Routing | 5 | | | |
| Layout & Badges | 3 | | | |
| Content Display | 5 | | | |
| Base Attributes | 11 | | | |
| Desire Attributes | 4 | | | |
| Action Buttons | 3 | | | |
| Prev/Next Nav | 5 | | | |
| Delete Modal | 5 | | | |
| Responsive | 3 | | | |
| Accessibility | 4 | | | |
| Performance | 2 | | | |
| Edge Cases | 5 | | | |
| Cross-Browser | 3 | | | |
| Security | 3 | | | |
| **TOTAL** | **61** | | | |

---

## Issues Found During Testing

| ID | Severity | Description | Steps to Reproduce | Expected | Actual |
|----|----------|-------------|-------------------|----------|--------|
| 1 | | | | | |
| 2 | | | | | |
| 3 | | | | | |

---

## Sign-Off

- [ ] All critical tests passed
- [ ] All blocking issues resolved
- [ ] Story is ready for production

**Tester Signature**: ___________________
**Date**: ___________________

**Notes**:
