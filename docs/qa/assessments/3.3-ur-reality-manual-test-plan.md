# Manual Test Plan: Story 3.3 - /ur-reality Mystery Map

**Story**: 3.3 - /ur-reality Mystery Map
**Test Type**: Manual Acceptance Testing
**Created**: 2025-11-09
**Created By**: Quinn (Test Architect)
**Purpose**: Verify all acceptance criteria through manual testing before marking story as Done

---

## Test Environment Setup

### Prerequisites
- [ ] Application running locally (`pnpm dev`)
- [ ] User authenticated (logged in)
- [ ] Test data: Various counts of somethings in database
  - 0 somethings (for empty state)
  - 1 something (for centered layout)
  - 2 somethings (for left/right layout)
  - 3 somethings (for thirds layout)
  - 4 somethings (for quadrants layout)
  - 5 somethings (for quadrants + center)
  - 10+ somethings (for random spread)
  - 20+ somethings (for density testing)
- [ ] Different content types: text, photos, videos, links
- [ ] Browser DevTools open (for checking console errors)

### Test Data Preparation

**Option 1: Create via UI**
1. Use `/capture` or `/deep-capture` to create various somethings
2. Include different content types (text, photos, links)

**Option 2: Direct database insert**
Use provided test script: `test-data-setup.sql`

---

## Test Cases

### TC-01: Route Access and Authentication (AC1)

**Objective**: Verify unauthenticated users are redirected

**Steps**:
1. Log out of the application
2. Navigate to `/ur-reality` in browser

**Expected Results**:
- [ ] Redirect occurs to `/login`
- [ ] User cannot access mystery map without authentication

**Priority**: P0
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-02: Direct Navigation (AC1)

**Objective**: Verify authenticated users can access route

**Steps**:
1. Ensure user is logged in
2. Type `/ur-reality` in browser address bar
3. Press Enter

**Expected Results**:
- [ ] Page loads successfully
- [ ] No redirect occurs
- [ ] Mystery map is displayed
- [ ] User's somethings are fetched and shown

**Priority**: P0
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-03: Visual Design - Dark Space Theme (AC2)

**Objective**: Verify space theme aesthetic

**Steps**:
1. Navigate to `/ur-reality`
2. Observe background and visual design

**Expected Results**:
- [ ] Background is dark blue (#0a1628 or similar)
- [ ] Space/night sky theme
- [ ] Subtle stars visible in background
- [ ] Stars have varying opacity (randomized)
- [ ] Full-screen layout (no navbar clutter)
- [ ] Aesthetic is playful and inviting

**Priority**: P1
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-04: Question Mark Design (AC2)

**Objective**: Verify question mark visual appearance

**Steps**:
1. Navigate to `/ur-reality` with at least 1 something
2. Observe question mark appearance

**Expected Results**:
- [ ] Question marks are grey (#888)
- [ ] Cartoon/playful style (thick outlines, rounded)
- [ ] Question mark "?" symbol is clear and centered
- [ ] Circle background with visible stroke
- [ ] Friendly, not intimidating appearance
- [ ] All question marks same color (vibe-based coloring is future feature)

**Priority**: P1
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-05: Distribution - 1 Something (AC3)

**Objective**: Verify single item is centered and large

**Steps**:
1. Ensure user has exactly 1 something in database
2. Navigate to `/ur-reality`
3. Observe question mark position and size

**Expected Results**:
- [ ] 1 question mark visible
- [ ] Positioned at center of screen (50%, 50%)
- [ ] Large size (120px)
- [ ] Clearly visible and prominent

**Priority**: P0
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-06: Distribution - 2 Somethings (AC3)

**Objective**: Verify two items are distributed left and right

**Steps**:
1. Ensure user has exactly 2 somethings
2. Navigate to `/ur-reality`

**Expected Results**:
- [ ] 2 question marks visible
- [ ] Positioned left (30%) and right (70%)
- [ ] Both at vertical center (50%)
- [ ] Size is 100px (slightly smaller than 1 item)
- [ ] Clear separation between them

**Priority**: P0
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-07: Distribution - 3 Somethings (AC3)

**Objective**: Verify three items are distributed in thirds

**Steps**:
1. Ensure user has exactly 3 somethings
2. Navigate to `/ur-reality`

**Expected Results**:
- [ ] 3 question marks visible
- [ ] Positioned at left (25%), center (50%), right (75%)
- [ ] All at vertical center (50%)
- [ ] Size is 80px (smaller than 2 items)
- [ ] Equal spacing between them

**Priority**: P0
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-08: Distribution - 4 Somethings (AC3)

**Objective**: Verify four items are distributed in quadrants

**Steps**:
1. Ensure user has exactly 4 somethings
2. Navigate to `/ur-reality`

**Expected Results**:
- [ ] 4 question marks visible
- [ ] Positioned in quadrants: top-left, top-right, bottom-left, bottom-right
- [ ] Approximate positions: (30%, 30%), (70%, 30%), (30%, 70%), (70%, 70%)
- [ ] Size is 70px
- [ ] Symmetrical layout

**Priority**: P0
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-09: Distribution - 5 Somethings (AC3)

**Objective**: Verify five items are distributed in quadrants + center

**Steps**:
1. Ensure user has exactly 5 somethings
2. Navigate to `/ur-reality`

**Expected Results**:
- [ ] 5 question marks visible
- [ ] 4 in corners + 1 in center
- [ ] Approximate positions: (25%, 25%), (75%, 25%), (50%, 50%), (25%, 75%), (75%, 75%)
- [ ] Size is 60px
- [ ] Balanced layout

**Priority**: P0
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-10: Distribution - 6+ Somethings Random Spread (AC3)

**Objective**: Verify 6 or more items use random distribution

**Steps**:
1. Ensure user has 10 somethings
2. Navigate to `/ur-reality`
3. Refresh page multiple times

**Expected Results**:
- [ ] 10 question marks visible
- [ ] Distributed across the screen (not in pattern)
- [ ] Size is smaller than 5 items (scales down)
- [ ] No two question marks overlap
- [ ] Minimum separation maintained
- [ ] Positions stay within boundaries (10-90% of viewport)
- [ ] Layout may differ on refresh (random placement)

**Priority**: P0
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-11: Collision Avoidance (AC3)

**Objective**: Verify question marks don't overlap

**Steps**:
1. Ensure user has 20 somethings
2. Navigate to `/ur-reality`
3. Visually inspect all question marks

**Expected Results**:
- [ ] All 20 question marks visible
- [ ] No overlapping question marks
- [ ] Minimum separation maintained between all
- [ ] All positions within boundaries
- [ ] Distribution appears natural (not too clustered)

**Priority**: P0
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-12: Auto-Scaling Size (AC3)

**Objective**: Verify size decreases as count increases

**Steps**:
1. Test with 1, 5, 10, and 20 somethings
2. Observe question mark sizes

**Expected Results**:
- [ ] 1 something: Largest size (120px)
- [ ] 5 somethings: Medium size (60px)
- [ ] 10 somethings: Smaller size (~80px calculated)
- [ ] 20 somethings: Even smaller (~60px calculated)
- [ ] Size never goes below 30px (minimum threshold)
- [ ] Inverse relationship: more items = smaller size

**Priority**: P1
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-13: Hover Interaction on Unclicked Question Mark (AC4)

**Objective**: Verify content appears on hover

**Steps**:
1. Navigate to `/ur-reality` with somethings
2. Move mouse over an unclicked question mark (DO NOT CLICK)
3. Keep mouse hovering
4. Move mouse away

**Expected Results**:
- [ ] When hover starts: Content appears underneath question mark
- [ ] Content has higher z-index (appears above other question marks)
- [ ] Smooth fade-in transition (~200ms)
- [ ] When hover ends: Content disappears
- [ ] Smooth fade-out transition (~200ms)
- [ ] Question mark remains grey (not darkened)

**Priority**: P0
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-14: Click Interaction - Lock Content Open (AC5)

**Objective**: Verify clicking locks content open

**Steps**:
1. Navigate to `/ur-reality`
2. Click on the question mark circle (specifically the circle part)
3. Move mouse away from question mark

**Expected Results**:
- [ ] On click: Question mark darkens slightly inside (#555 vs #888)
- [ ] Content displays underneath
- [ ] Content stays visible even when mouse moves away
- [ ] Question mark is "locked open"
- [ ] Visual feedback clearly indicates clicked state

**Priority**: P0
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-15: Multiple Question Marks Clicked (AC5)

**Objective**: Verify multiple question marks can be clicked simultaneously

**Steps**:
1. Navigate to `/ur-reality` with at least 3 somethings
2. Click on first question mark
3. Click on second question mark
4. Click on third question mark
5. Observe all three contents

**Expected Results**:
- [ ] All 3 question marks are darkened
- [ ] All 3 contents are visible simultaneously
- [ ] User can compare/contrast multiple somethings
- [ ] No limit on how many can be clicked
- [ ] Z-index properly manages overlapping content

**Priority**: P0
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-16: Clicked Question Mark Ignores Hover (AC6)

**Objective**: Verify already-clicked question marks ignore hover

**Steps**:
1. Click a question mark (lock it open)
2. Move mouse away
3. Move mouse back over the clicked question mark
4. Hover on a different unclicked question mark

**Expected Results**:
- [ ] Clicked question mark: Content stays visible (no flicker)
- [ ] Hovering over clicked question mark does nothing (already showing content)
- [ ] Other unclicked question marks still respond to hover
- [ ] Clear distinction between locked and hoverable states

**Priority**: P1
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-17: Toggle Off by Clicking Again (AC6)

**Objective**: Verify clicking again unlocks question mark

**Steps**:
1. Click a question mark (lock it open)
2. Click the same question mark again

**Expected Results**:
- [ ] Content disappears
- [ ] Question mark returns to normal grey color (#888)
- [ ] Question mark is now "unlocked"
- [ ] Can hover on it again to preview

**Priority**: P1
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-18: Content Display - Text (AC7)

**Objective**: Verify text content is displayed correctly

**Steps**:
1. Ensure at least 1 something contains plain text
2. Hover or click to reveal content

**Expected Results**:
- [ ] Full text content displayed
- [ ] Text is NOT truncated
- [ ] White/light background
- [ ] Rounded corners and subtle shadow
- [ ] Max width ~400px
- [ ] Scrollable if very long text
- [ ] Timestamp shown at bottom

**Priority**: P0
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-19: Content Display - Photo (AC7)

**Objective**: Verify photo content is displayed correctly

**Steps**:
1. Ensure at least 1 something contains a photo (media_url)
2. Hover or click to reveal content

**Expected Results**:
- [ ] Actual photo is displayed (not placeholder)
- [ ] Image loads from media_url
- [ ] Image is contained within max dimensions
- [ ] Rounded corners and shadow on content card
- [ ] Timestamp shown at bottom

**Priority**: P0
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-20: Content Display - Video (AC7)

**Objective**: Verify video content is displayed correctly

**Steps**:
1. Ensure at least 1 something contains a video
2. Hover or click to reveal content

**Expected Results**:
- [ ] Video thumbnail shown OR video player
- [ ] If video player: controls are visible
- [ ] Video can be played (if simple player implemented)
- [ ] Contained within max dimensions
- [ ] Timestamp shown at bottom

**Priority**: P1
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-21: Content Display - Link Preview (AC7)

**Objective**: Verify link preview card is displayed

**Steps**:
1. Ensure at least 1 something has link preview attributes
2. Hover or click to reveal content

**Expected Results**:
- [ ] Link preview card displayed
- [ ] Shows title (if available)
- [ ] Shows description (if available)
- [ ] Shows image (if available)
- [ ] Shows URL
- [ ] Fallback to plain URL if no metadata
- [ ] Timestamp shown at bottom

**Priority**: P1
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-22: Content Positioning - Underneath Question Mark (AC8)

**Objective**: Verify content appears underneath by default

**Steps**:
1. Click a question mark in the center of screen
2. Observe content position

**Expected Results**:
- [ ] Content appears underneath question mark
- [ ] Top of content is below bottom of question mark
- [ ] Small offset (10px) between question mark and content
- [ ] Content is horizontally centered under question mark

**Priority**: P1
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-23: Content Positioning - Edge Detection Right (AC8)

**Objective**: Verify content shifts left when near right edge

**Steps**:
1. Have a something positioned near right edge (90%+)
2. Click the question mark
3. Observe content position

**Expected Results**:
- [ ] Content does NOT overflow right edge
- [ ] Content shifts left to stay on-screen
- [ ] Content stays within viewport bounds (20px margin)
- [ ] Content is still readable

**Priority**: P0
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-24: Content Positioning - Edge Detection Left (AC8)

**Objective**: Verify content shifts right when near left edge

**Steps**:
1. Have a something positioned near left edge (10% or less)
2. Click the question mark
3. Observe content position

**Expected Results**:
- [ ] Content does NOT overflow left edge
- [ ] Content shifts right to stay on-screen
- [ ] Content stays within viewport bounds (20px margin)

**Priority**: P0
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-25: Content Positioning - Edge Detection Bottom (AC8)

**Objective**: Verify content appears above when near bottom

**Steps**:
1. Have a something positioned near bottom edge (90%+)
2. Click the question mark
3. Observe content position

**Expected Results**:
- [ ] Content does NOT overflow bottom edge
- [ ] Content appears ABOVE question mark instead of below
- [ ] Content stays fully visible within viewport

**Priority**: P0
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-26: Z-Index Hierarchy (AC8)

**Objective**: Verify proper layering of elements

**Steps**:
1. Click multiple question marks with overlapping content
2. Observe layering

**Expected Results**:
- [ ] Background (space) = lowest layer
- [ ] Question marks = middle layer (z-index: 1)
- [ ] Content cards = highest layer (z-index: 2)
- [ ] Content appears above question marks
- [ ] Content can overlap question marks without issues

**Priority**: P1
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-27: Empty State (AC9)

**Objective**: Verify empty state when user has 0 somethings

**Steps**:
1. Ensure user has 0 somethings in database
2. Navigate to `/ur-reality`

**Expected Results**:
- [ ] Empty state message displayed
- [ ] Message: "No somethings captured yet."
- [ ] Link button visible: "Start capturing"
- [ ] Link button navigates to `/capture`
- [ ] No question marks shown
- [ ] No errors in console

**Priority**: P0
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-28: Performance - Up to 100 Items (AC10)

**Objective**: Verify acceptable performance with many items

**Steps**:
1. Ensure user has 100 somethings
2. Navigate to `/ur-reality`
3. Measure page load time
4. Interact with question marks

**Expected Results**:
- [ ] Page loads within reasonable time (<3 seconds)
- [ ] All 100 question marks render
- [ ] No lag when hovering or clicking
- [ ] Smooth interactions
- [ ] No browser performance warnings

**Priority**: P0
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-29: Performance - Up to 200 Items (AC10)

**Objective**: Verify acceptable performance at spec limit

**Steps**:
1. Ensure user has 200 somethings
2. Navigate to `/ur-reality`
3. Measure page load time and interaction smoothness

**Expected Results**:
- [ ] Page loads (may be slower but acceptable)
- [ ] All 200 question marks render
- [ ] Interactions still responsive
- [ ] Acceptable performance as specified in AC10

**Priority**: P1
**Status**: [ ] Pass [ ] Fail [ ] Blocked

**Notes**: If performance is unacceptable, consider this a defect.

---

### TC-30: Responsive - Viewport Resize (AC8, AC3)

**Objective**: Verify layout adapts to viewport changes

**Steps**:
1. Navigate to `/ur-reality`
2. Resize browser window (make smaller, then larger)
3. Observe question mark positions and content

**Expected Results**:
- [ ] Question marks stay within viewport on resize
- [ ] Content positioning recalculates on resize
- [ ] Content stays on-screen
- [ ] No content cutoff or overflow
- [ ] Resize listener properly updates state

**Priority**: P1
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-31: Responsive - Mobile Screen (AC8)

**Objective**: Verify layout works on mobile viewport

**Steps**:
1. Test on mobile device or use DevTools mobile emulation (375x667)
2. Navigate to `/ur-reality`

**Expected Results**:
- [ ] Question marks are appropriately sized
- [ ] Content fits within mobile screen
- [ ] Content max width adapts (400px or viewport - 40px)
- [ ] Touch interactions work (tap to click)
- [ ] No horizontal scrolling

**Priority**: P1
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-32: Responsive - Tablet Screen (AC8)

**Objective**: Verify layout works on tablet viewport

**Steps**:
1. Test on tablet device or use DevTools emulation (768x1024)
2. Navigate to `/ur-reality`

**Expected Results**:
- [ ] Layout adapts to tablet size
- [ ] Question marks well-distributed
- [ ] Content is readable and properly sized
- [ ] Interactions work smoothly

**Priority**: P2
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-33: Content Scrollable When Long (AC7)

**Objective**: Verify long content is scrollable

**Steps**:
1. Ensure at least 1 something has very long text content (1000+ characters)
2. Click to reveal content

**Expected Results**:
- [ ] Content card has max height (400px)
- [ ] Scrollbar appears if content exceeds max height
- [ ] User can scroll within content card
- [ ] Content card position stays fixed (doesn't jump)

**Priority**: P1
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-34: Timestamp Display (AC7 implied)

**Objective**: Verify timestamp is shown in content

**Steps**:
1. Click any question mark to reveal content
2. Look at bottom of content card

**Expected Results**:
- [ ] Timestamp visible at bottom
- [ ] Format: "MM/DD/YYYY at HH:MM:SS" (locale-based)
- [ ] Separated by border from main content
- [ ] Grey/muted text color
- [ ] Accurate timestamp from captured_at field

**Priority**: P2
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-35: No Content Available Fallback

**Objective**: Verify fallback when something has no content

**Steps**:
1. Ensure at least 1 something has null text_content, null media_url, and no link_preview
2. Click to reveal content

**Expected Results**:
- [ ] Content card still appears
- [ ] Message shown: "No content available"
- [ ] Italicized grey text
- [ ] No crash or error
- [ ] Timestamp still shown

**Priority**: P2
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-36: Browser Compatibility

**Objective**: Verify functionality across browsers

**Steps**:
1. Test in Chrome
2. Test in Firefox
3. Test in Safari (if available)
4. Test in Edge

**Expected Results**:
- [ ] All features work in Chrome
- [ ] All features work in Firefox
- [ ] All features work in Safari
- [ ] All features work in Edge
- [ ] SVG question marks render correctly in all browsers
- [ ] Hover/click interactions work in all browsers

**Priority**: P2
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-37: Visual Polish - Stars Background

**Objective**: Verify subtle star effects in background

**Steps**:
1. Navigate to `/ur-reality`
2. Observe background closely

**Expected Results**:
- [ ] Approximately 50 stars visible
- [ ] Stars are small white dots
- [ ] Randomized positions
- [ ] Varying opacity (some brighter, some dimmer)
- [ ] Opacity range: 30-80%
- [ ] Subtle and not distracting

**Priority**: P2
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

### TC-38: Console Errors Check

**Objective**: Verify no JavaScript errors in console

**Steps**:
1. Open browser DevTools console
2. Navigate to `/ur-reality`
3. Interact with question marks (hover, click, multiple clicks)
4. Observe console

**Expected Results**:
- [ ] No errors in console during page load
- [ ] No errors during hover interactions
- [ ] No errors during click interactions
- [ ] No errors during viewport resize
- [ ] No warnings about React keys or state updates

**Priority**: P1
**Status**: [ ] Pass [ ] Fail [ ] Blocked

---

## Summary

**Total Test Cases**: 38
**P0 (Critical)**: 19
**P1 (High)**: 14
**P2 (Medium)**: 5

**Pass Criteria**: All P0 and P1 tests must pass. P2 tests are nice-to-have.

**Test Completion**: [ ] All tests executed
**Overall Status**: [ ] Pass [ ] Fail
**Ready for Done**: [ ] Yes [ ] No

**Tested By**: ________________
**Test Date**: ________________
**Notes**:

---

## Defects Found

| ID | Severity | Description | Steps to Reproduce | Status |
|----|----------|-------------|-------------------|--------|
| | | | | |

---

## Notes for Tester

1. **Test Data Preparation**: Use the provided test setup script or manually create somethings via UI. You'll need specific counts (1, 2, 3, 4, 5, 10, 20, 100, 200) to test all distribution patterns.

2. **Distribution Patterns**: For 1-5 items, positions are deterministic and should match exactly. For 6+ items, positions are random but should maintain separation.

3. **Performance Testing**: Tests with 100 and 200 items are important to verify performance meets AC10 spec. Use browser DevTools Performance tab if needed.

4. **Edge Detection**: Test edge detection by creating somethings and then testing, or manipulate viewport size to move question marks near edges.

5. **Content Types**: Ensure you have varied content types (text, photos, videos, links) to test all rendering paths.

6. **Visual Verification**: Many tests require visual inspection of design aesthetics (space theme, question mark style, etc).

7. **Refresh Behavior**: For random distribution (6+ items), refreshing the page may produce different layouts - this is expected behavior.

---

## Test Data Setup Script

Use this SQL to populate different test scenarios:

```sql
-- Clean slate (0 somethings)
DELETE FROM somethings WHERE user_id = '<YOUR_USER_ID>';

-- 1 something
INSERT INTO somethings (user_id, text_content) VALUES ('<YOUR_USER_ID>', 'Single item test');

-- 5 somethings (for quadrants + center test)
-- Run delete first, then insert 5
```

---

## Acceptance Sign-Off

**QA Approval**: ________________  Date: ________
**Product Owner Approval**: ________________  Date: ________
**Developer Confirmation**: ________________  Date: ________
